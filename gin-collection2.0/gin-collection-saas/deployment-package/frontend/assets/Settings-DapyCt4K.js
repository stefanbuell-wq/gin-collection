import{a as M,r as n,j as s,S as is,C as T,l as F}from"./index-Dq7p2DR6.js";import{m as t}from"./motion-EK-w8E6l.js";import{U as m}from"./user-CUOY7Yyd.js";import{B as $}from"./building-2-Dt3MgnjI.js";import{L as d,M as b,E as D}from"./mail-jdAMvOAp.js";import{B as U}from"./bell-DRgBHISg.js";import{A as ts}from"./index-DuCggoYX.js";import{A as L}from"./alert-circle-DRaOH51V.js";import{C as H}from"./check-R9WvdGvo.js";import{S as as}from"./save-DUlb5lYD.js";import{C as ns}from"./crown-BLRehSOs.js";import{S as rs}from"./sparkles-BiJaVdz3.js";import{E as R}from"./eye-off-DNtvnz7x.js";import{S as I}from"./shield-DBx4bEY8.js";import{A as Z}from"./alert-triangle-CNM-d7uF.js";const bs=()=>{var E;const{user:i,tenant:e}=M(),[h,q]=n.useState("profile"),[x,G]=n.useState({first_name:(i==null?void 0:i.first_name)||"",last_name:(i==null?void 0:i.last_name)||"",email:(i==null?void 0:i.email)||""}),[w,y]=n.useState(!1),[K,j]=n.useState(!1),[S,C]=n.useState(""),[l,P]=n.useState({current_password:"",new_password:"",confirm_password:""}),[z,k]=n.useState(!1),[O,v]=n.useState(!1),[A,p]=n.useState(""),[u,V]=n.useState(!1),[N,W]=n.useState(!1),_=a=>{const{name:o,value:r}=a.target;G(g=>({...g,[o]:r})),j(!1)},f=a=>{const{name:o,value:r}=a.target;P(g=>({...g,[o]:r})),v(!1),p("")},J=async a=>{a.preventDefault(),C(""),y(!0);try{const r=(await F.updateProfile({first_name:x.first_name||void 0,last_name:x.last_name||void 0})).data;r.data&&M.getState().setUser(r.data),j(!0),setTimeout(()=>j(!1),3e3)}catch{C("Profil konnte nicht aktualisiert werden. Bitte versuche es erneut.")}finally{y(!1)}},Q=async a=>{if(a.preventDefault(),p(""),l.new_password!==l.confirm_password){p("Passworter stimmen nicht uberein");return}if(l.new_password.length<8){p("Passwort muss mindestens 8 Zeichen haben");return}k(!0);try{await F.changePassword(l.current_password,l.new_password),P({current_password:"",new_password:"",confirm_password:""}),v(!0),setTimeout(()=>v(!1),3e3)}catch{p("Passwort konnte nicht geandert werden. Bitte prufe dein aktuelles Passwort.")}finally{k(!1)}},X=[{id:"profile",label:"Profil",icon:m},{id:"account",label:"Konto",icon:$},{id:"security",label:"Sicherheit",icon:d},{id:"notifications",label:"Benachrichtigungen",icon:U}],Y=a=>{switch(a){case"free":return"settings-badge--tier-free";case"basic":return"settings-badge--tier-basic";case"pro":return"settings-badge--tier-pro";case"enterprise":return"settings-badge--tier-enterprise";default:return"settings-badge--tier-free"}},ss=a=>{switch(a){case"owner":return"settings-badge--role-owner";case"admin":return"settings-badge--role-admin";case"member":return"settings-badge--role-member";case"viewer":return"settings-badge--role-viewer";default:return"settings-badge--role-viewer"}},es=()=>{var r,g,B;const a=((r=i==null?void 0:i.first_name)==null?void 0:r[0])||((g=i==null?void 0:i.email)==null?void 0:g[0])||"?",o=((B=i==null?void 0:i.last_name)==null?void 0:B[0])||"";return(a+o).toUpperCase()},c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return s.jsxs("div",{className:"settings-page",children:[s.jsxs("div",{className:"settings-page__ambient",children:[s.jsx("div",{className:"settings-ambient-orb settings-ambient-orb--1"}),s.jsx("div",{className:"settings-ambient-orb settings-ambient-orb--2"}),s.jsx("div",{className:"settings-ambient-orb settings-ambient-orb--3"})]}),s.jsxs("div",{className:"settings-container",children:[s.jsxs(t.div,{className:"settings-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[s.jsxs("div",{className:"settings-header__content",children:[s.jsx("div",{className:"settings-header__icon",children:s.jsx(is,{size:28})}),s.jsxs("div",{className:"settings-header__text",children:[s.jsx("h1",{children:"Einstellungen"}),s.jsx("p",{children:"Verwalte dein Konto und deine Praferenzen"})]})]}),s.jsxs("div",{className:"settings-header__user",children:[s.jsx("div",{className:"settings-header__avatar",children:es()}),s.jsxs("div",{className:"settings-header__info",children:[s.jsx("span",{className:"settings-header__name",children:i!=null&&i.first_name&&(i!=null&&i.last_name)?`${i.first_name} ${i.last_name}`:(E=i==null?void 0:i.email)==null?void 0:E.split("@")[0]}),s.jsx("span",{className:"settings-header__email",children:i==null?void 0:i.email})]})]})]}),s.jsx(t.div,{className:"settings-tabs",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:X.map(a=>s.jsxs("button",{onClick:()=>q(a.id),className:`settings-tab ${h===a.id?"settings-tab--active":""}`,children:[s.jsx(a.icon,{className:"settings-tab__icon"}),a.label]},a.id))}),s.jsxs(ts,{mode:"wait",children:[h==="profile"&&s.jsxs(t.div,{initial:"hidden",animate:"visible",exit:"hidden",variants:{visible:{transition:{staggerChildren:.1}}},children:[s.jsxs(t.div,{className:"settings-card",variants:c,children:[s.jsx("div",{className:"settings-card__header",children:s.jsxs("div",{className:"settings-card__title",children:[s.jsx("div",{className:"settings-card__title-icon",children:s.jsx(m,{size:20})}),s.jsx("h2",{children:"Personliche Informationen"})]})}),S&&s.jsxs(t.div,{className:"settings-error",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:[s.jsx(L,{size:18}),s.jsx("span",{children:S})]}),s.jsxs("form",{onSubmit:J,className:"settings-form",children:[s.jsxs("div",{className:"settings-form-row",children:[s.jsxs("div",{className:"settings-form-group",children:[s.jsxs("label",{className:"settings-form-label",children:[s.jsx(m,{size:14}),"Vorname"]}),s.jsxs("div",{className:"settings-input-wrapper",children:[s.jsx("input",{type:"text",name:"first_name",value:x.first_name,onChange:_,className:"settings-input",placeholder:"Max"}),s.jsx(m,{size:18,className:"settings-input-icon"})]})]}),s.jsxs("div",{className:"settings-form-group",children:[s.jsxs("label",{className:"settings-form-label",children:[s.jsx(m,{size:14}),"Nachname"]}),s.jsxs("div",{className:"settings-input-wrapper",children:[s.jsx("input",{type:"text",name:"last_name",value:x.last_name,onChange:_,className:"settings-input",placeholder:"Mustermann"}),s.jsx(m,{size:18,className:"settings-input-icon"})]})]})]}),s.jsxs("div",{className:"settings-form-group",children:[s.jsxs("label",{className:"settings-form-label",children:[s.jsx(b,{size:14}),"E-Mail Adresse"]}),s.jsxs("div",{className:"settings-input-wrapper",children:[s.jsx("input",{type:"email",name:"email",value:x.email,onChange:_,className:"settings-input",placeholder:"name@beispiel.de",disabled:!0}),s.jsx(b,{size:18,className:"settings-input-icon"})]}),s.jsx("span",{className:"settings-input-hint",children:"E-Mail kann nicht geandert werden"})]}),s.jsxs("div",{className:"settings-form-actions",children:[s.jsx("div",{children:K&&s.jsxs(t.span,{className:"settings-success",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},children:[s.jsx(H,{size:16}),"Profil erfolgreich gespeichert"]})}),s.jsx(t.button,{type:"submit",className:"settings-btn settings-btn--primary",disabled:w,whileHover:{scale:1.02},whileTap:{scale:.98},children:w?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"settings-spinner"}),s.jsx("span",{children:"Speichern..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(as,{size:18}),s.jsx("span",{children:"Speichern"})]})})]})]})]}),s.jsx(t.div,{className:"settings-card settings-card--accent",variants:c,children:s.jsxs("div",{className:"settings-role-card",children:[s.jsxs("div",{className:"settings-role-info",children:[s.jsx("span",{className:"settings-role-info__label",children:"Deine Rolle"}),s.jsxs("div",{className:"settings-role-info__value",children:[s.jsx("span",{className:`settings-badge ${ss((i==null?void 0:i.role)||"")}`,children:(i==null?void 0:i.role)||"Unbekannt"}),(i==null?void 0:i.role)==="owner"&&s.jsx(ns,{size:16,style:{color:"var(--gold)"}})]})]}),s.jsxs("div",{className:"settings-date-info",children:[s.jsx("span",{className:"settings-date-info__label",children:"Mitglied seit"}),s.jsx("span",{className:"settings-date-info__value",children:i!=null&&i.created_at?new Date(i.created_at).toLocaleDateString("de-DE",{day:"2-digit",month:"long",year:"numeric"}):"-"})]})]})})]},"profile"),h==="account"&&s.jsxs(t.div,{initial:"hidden",animate:"visible",exit:"hidden",variants:{visible:{transition:{staggerChildren:.1}}},children:[s.jsxs(t.div,{className:"settings-card",variants:c,children:[s.jsx("div",{className:"settings-card__header",children:s.jsxs("div",{className:"settings-card__title",children:[s.jsx("div",{className:"settings-card__title-icon",children:s.jsx($,{size:20})}),s.jsx("h2",{children:"Organisation"})]})}),s.jsxs("div",{className:"settings-info-grid",children:[s.jsxs("div",{className:"settings-info-item",children:[s.jsx("span",{className:"settings-info-label",children:"Organisationsname"}),s.jsx("span",{className:"settings-info-value",children:(e==null?void 0:e.name)||"-"})]}),s.jsxs("div",{className:"settings-info-item",children:[s.jsx("span",{className:"settings-info-label",children:"Subdomain"}),s.jsxs("span",{className:"settings-info-value settings-info-value--mono",children:[(e==null?void 0:e.subdomain)||"-",".ginvault.app"]})]}),s.jsxs("div",{className:"settings-info-item",children:[s.jsx("span",{className:"settings-info-label",children:"Status"}),s.jsx("span",{className:`settings-badge ${(e==null?void 0:e.status)==="active"?"settings-badge--status-active":"settings-badge--status-inactive"}`,children:(e==null?void 0:e.status)==="active"?"Aktiv":"Inaktiv"})]}),s.jsxs("div",{className:"settings-info-item",children:[s.jsx("span",{className:"settings-info-label",children:"Erstellt am"}),s.jsx("span",{className:"settings-info-value",children:e!=null&&e.created_at?new Date(e.created_at).toLocaleDateString("de-DE"):"-"})]})]})]}),s.jsxs(t.div,{className:"settings-card",variants:c,children:[s.jsxs("div",{className:"settings-card__header",children:[s.jsxs("div",{className:"settings-card__title",children:[s.jsx("div",{className:"settings-card__title-icon",children:s.jsx(T,{size:20})}),s.jsx("h2",{children:"Abonnement"})]}),s.jsxs("span",{className:`settings-badge ${Y((e==null?void 0:e.tier)||"")}`,children:[s.jsx(rs,{size:12}),(e==null?void 0:e.tier)||"Free"," Plan"]})]}),s.jsxs("div",{className:"settings-subscription-stats",children:[s.jsxs("div",{className:"settings-stat",children:[s.jsx("span",{className:"settings-stat__value",children:(e==null?void 0:e.tier)==="free"?"10":(e==null?void 0:e.tier)==="basic"?"50":"∞"}),s.jsx("span",{className:"settings-stat__label",children:"Max Gins"})]}),s.jsxs("div",{className:"settings-stat",children:[s.jsx("span",{className:"settings-stat__value",children:(e==null?void 0:e.tier)==="free"?"1":(e==null?void 0:e.tier)==="basic"?"3":(e==null?void 0:e.tier)==="pro"?"10":"50"}),s.jsx("span",{className:"settings-stat__label",children:"Fotos/Gin"})]}),s.jsxs("div",{className:"settings-stat",children:[s.jsx("span",{className:`settings-stat__value ${(e==null?void 0:e.tier)==="pro"||(e==null?void 0:e.tier)==="enterprise"?"settings-stat__value--check":"settings-stat__value--cross"}`,children:(e==null?void 0:e.tier)==="pro"||(e==null?void 0:e.tier)==="enterprise"?"✓":"✗"}),s.jsx("span",{className:"settings-stat__label",children:"Botanicals"})]}),s.jsxs("div",{className:"settings-stat",children:[s.jsx("span",{className:`settings-stat__value ${(e==null?void 0:e.tier)==="enterprise"?"settings-stat__value--check":"settings-stat__value--cross"}`,children:(e==null?void 0:e.tier)==="enterprise"?"✓":"✗"}),s.jsx("span",{className:"settings-stat__label",children:"Multi-User"})]})]}),s.jsxs(t.button,{onClick:()=>window.location.href="/subscription",className:"settings-btn settings-btn--secondary settings-btn--full",whileHover:{scale:1.01},whileTap:{scale:.99},children:[s.jsx(T,{size:18}),"Abonnement verwalten"]})]})]},"account"),h==="security"&&s.jsxs(t.div,{initial:"hidden",animate:"visible",exit:"hidden",variants:{visible:{transition:{staggerChildren:.1}}},children:[s.jsxs(t.div,{className:"settings-card",variants:c,children:[s.jsx("div",{className:"settings-card__header",children:s.jsxs("div",{className:"settings-card__title",children:[s.jsx("div",{className:"settings-card__title-icon",children:s.jsx(d,{size:20})}),s.jsx("h2",{children:"Passwort andern"})]})}),A&&s.jsxs(t.div,{className:"settings-error",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:[s.jsx(L,{size:18}),s.jsx("span",{children:A})]}),s.jsxs("form",{onSubmit:Q,className:"settings-form",children:[s.jsxs("div",{className:"settings-form-group",children:[s.jsxs("label",{className:"settings-form-label",children:[s.jsx(d,{size:14}),"Aktuelles Passwort"]}),s.jsxs("div",{className:"settings-input-wrapper",children:[s.jsx("input",{type:u?"text":"password",name:"current_password",value:l.current_password,onChange:f,className:"settings-input",placeholder:"Aktuelles Passwort eingeben",required:!0,style:{paddingRight:"48px"}}),s.jsx(d,{size:18,className:"settings-input-icon"}),s.jsx("button",{type:"button",className:"settings-password-toggle",onClick:()=>V(!u),children:u?s.jsx(R,{size:18}):s.jsx(D,{size:18})})]})]}),s.jsxs("div",{className:"settings-form-group",children:[s.jsxs("label",{className:"settings-form-label",children:[s.jsx(d,{size:14}),"Neues Passwort"]}),s.jsxs("div",{className:"settings-input-wrapper",children:[s.jsx("input",{type:N?"text":"password",name:"new_password",value:l.new_password,onChange:f,className:"settings-input",placeholder:"Neues Passwort eingeben",minLength:8,required:!0,style:{paddingRight:"48px"}}),s.jsx(d,{size:18,className:"settings-input-icon"}),s.jsx("button",{type:"button",className:"settings-password-toggle",onClick:()=>W(!N),children:N?s.jsx(R,{size:18}):s.jsx(D,{size:18})})]}),s.jsx("span",{className:"settings-input-hint",children:"Mindestens 8 Zeichen"})]}),s.jsxs("div",{className:"settings-form-group",children:[s.jsxs("label",{className:"settings-form-label",children:[s.jsx(d,{size:14}),"Passwort bestatigen"]}),s.jsxs("div",{className:"settings-input-wrapper",children:[s.jsx("input",{type:"password",name:"confirm_password",value:l.confirm_password,onChange:f,className:"settings-input",placeholder:"Neues Passwort bestatigen",required:!0}),s.jsx(d,{size:18,className:"settings-input-icon"})]})]}),s.jsxs("div",{className:"settings-form-actions",children:[s.jsx("div",{children:O&&s.jsxs(t.span,{className:"settings-success",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},children:[s.jsx(H,{size:16}),"Passwort erfolgreich geandert"]})}),s.jsx(t.button,{type:"submit",className:"settings-btn settings-btn--primary",disabled:z,whileHover:{scale:1.02},whileTap:{scale:.98},children:z?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"settings-spinner"}),s.jsx("span",{children:"Speichern..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(I,{size:18}),s.jsx("span",{children:"Passwort andern"})]})})]})]})]}),s.jsxs(t.div,{className:"settings-card settings-card--accent",variants:c,children:[s.jsx("div",{className:"settings-card__header",children:s.jsxs("div",{className:"settings-card__title",children:[s.jsx("div",{className:"settings-card__title-icon",children:s.jsx(I,{size:20})}),s.jsx("h2",{children:"Sicherheitsinformationen"})]})}),s.jsxs("div",{className:"settings-security-grid",children:[s.jsxs("div",{className:"settings-security-item",children:[s.jsx("span",{className:"settings-security-label",children:"Letzter Login"}),s.jsx("span",{className:"settings-security-value",children:"Heute"})]}),s.jsxs("div",{className:"settings-security-item",children:[s.jsx("span",{className:"settings-security-label",children:"Account Status"}),s.jsx("span",{className:`settings-badge ${i!=null&&i.is_active?"settings-badge--status-active":"settings-badge--status-inactive"}`,children:i!=null&&i.is_active?"Aktiv":"Inaktiv"})]})]})]}),s.jsxs(t.div,{className:"settings-card settings-card--danger",variants:c,children:[s.jsx("div",{className:"settings-card__header",children:s.jsxs("div",{className:"settings-card__title settings-danger-title",children:[s.jsx("div",{className:"settings-card__title-icon",style:{background:"rgba(239, 68, 68, 0.15)",color:"#f87171"},children:s.jsx(Z,{size:20})}),s.jsx("h2",{children:"Gefahrenzone"})]})}),s.jsx("p",{className:"settings-danger-text",children:"Wenn du deinen Account loschst, gibt es kein Zuruck. Bitte sei dir sicher."}),s.jsxs(t.button,{className:"settings-btn settings-btn--danger",onClick:()=>alert("Account-Loschung ist noch nicht implementiert. Kontaktiere den Support."),whileHover:{scale:1.02},whileTap:{scale:.98},children:[s.jsx(Z,{size:18}),"Account loschen"]})]})]},"security"),h==="notifications"&&s.jsx(t.div,{initial:"hidden",animate:"visible",exit:"hidden",variants:{visible:{transition:{staggerChildren:.1}}},children:s.jsxs(t.div,{className:"settings-card",variants:c,children:[s.jsx("div",{className:"settings-card__header",children:s.jsxs("div",{className:"settings-card__title",children:[s.jsx("div",{className:"settings-card__title-icon",children:s.jsx(U,{size:20})}),s.jsx("h2",{children:"Benachrichtigungseinstellungen"})]})}),s.jsxs("div",{className:"settings-toggles",children:[s.jsxs("div",{className:"settings-toggle-item",children:[s.jsxs("div",{className:"settings-toggle-content",children:[s.jsx("span",{className:"settings-toggle-title",children:"E-Mail Benachrichtigungen"}),s.jsx("span",{className:"settings-toggle-description",children:"Erhalte Updates uber deine Sammlung"})]}),s.jsxs("label",{className:"settings-toggle",children:[s.jsx("input",{type:"checkbox",defaultChecked:!0}),s.jsx("span",{className:"settings-toggle__slider"})]})]}),s.jsxs("div",{className:"settings-toggle-item",children:[s.jsxs("div",{className:"settings-toggle-content",children:[s.jsx("span",{className:"settings-toggle-title",children:"Abonnement-Hinweise"}),s.jsx("span",{className:"settings-toggle-description",children:"Werde uber Abrechnungen und Plan-Anderungen informiert"})]}),s.jsxs("label",{className:"settings-toggle",children:[s.jsx("input",{type:"checkbox",defaultChecked:!0}),s.jsx("span",{className:"settings-toggle__slider"})]})]}),s.jsxs("div",{className:"settings-toggle-item",children:[s.jsxs("div",{className:"settings-toggle-content",children:[s.jsx("span",{className:"settings-toggle-title",children:"Marketing E-Mails"}),s.jsx("span",{className:"settings-toggle-description",children:"Erhalte Tipps, Neuigkeiten und Sonderangebote"})]}),s.jsxs("label",{className:"settings-toggle",children:[s.jsx("input",{type:"checkbox"}),s.jsx("span",{className:"settings-toggle__slider"})]})]}),s.jsxs("div",{className:"settings-toggle-item",children:[s.jsxs("div",{className:"settings-toggle-content",children:[s.jsx("span",{className:"settings-toggle-title",children:"Wochentliche Zusammenfassung"}),s.jsx("span",{className:"settings-toggle-description",children:"Erhalte eine wochentliche Ubersicht deiner Sammlungs-Statistiken"})]}),s.jsxs("label",{className:"settings-toggle",children:[s.jsx("input",{type:"checkbox"}),s.jsx("span",{className:"settings-toggle__slider"})]})]})]}),s.jsxs("div",{className:"settings-notification-footer",children:[s.jsx(b,{size:16}),"Benachrichtigungen werden gesendet an: ",s.jsx("span",{children:i==null?void 0:i.email})]})]})},"notifications")]})]})]})};export{bs as default};
