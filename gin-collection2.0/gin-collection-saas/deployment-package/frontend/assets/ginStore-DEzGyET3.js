import{h as g,i as t}from"./index-Dq7p2DR6.js";function s(n){return n.data.data}const u=g(n=>({gins:[],currentGin:null,stats:null,total:0,page:1,limit:20,isLoading:!1,error:null,fetchGins:async a=>{n({isLoading:!0,error:null});try{const r=await t.list(a),i=s(r),{gins:e,total:o,page:c,limit:l}=i;n({gins:e||[],total:o||0,page:c||1,limit:l||20,isLoading:!1})}catch(r){throw n({gins:[],error:r instanceof Error?r.message:"Failed to fetch gins",isLoading:!1}),r}},fetchGin:async a=>{n({isLoading:!0,error:null});try{const r=await t.get(a),i=s(r);n({currentGin:i,isLoading:!1})}catch(r){throw n({error:r instanceof Error?r.message:"Failed to fetch gin",isLoading:!1}),r}},fetchStats:async()=>{try{const a=await t.stats(),r=s(a);n({stats:r})}catch(a){console.error("Failed to fetch stats:",a),n({stats:null})}},createGin:async a=>{n({isLoading:!0,error:null});try{const r=await t.create(a),i=s(r);return n(e=>({gins:[i,...e.gins],total:e.total+1,isLoading:!1})),i}catch(r){throw n({error:r instanceof Error?r.message:"Failed to create gin",isLoading:!1}),r}},updateGin:async(a,r)=>{n({isLoading:!0,error:null});try{const i=await t.update(a,r),e=s(i);n(o=>{var c;return{gins:o.gins.map(l=>l.id===a?e:l),currentGin:((c=o.currentGin)==null?void 0:c.id)===a?e:o.currentGin,isLoading:!1}})}catch(i){throw n({error:i instanceof Error?i.message:"Failed to update gin",isLoading:!1}),i}},deleteGin:async a=>{n({isLoading:!0,error:null});try{await t.delete(a),n(r=>{var i;return{gins:r.gins.filter(e=>e.id!==a),total:r.total-1,currentGin:((i=r.currentGin)==null?void 0:i.id)===a?null:r.currentGin,isLoading:!1}})}catch(r){throw n({error:r instanceof Error?r.message:"Failed to delete gin",isLoading:!1}),r}},searchGins:async a=>{n({isLoading:!0,error:null});try{const r=await t.search(a),i=s(r),{gins:e,total:o}=i;n({gins:e||[],total:o||0,isLoading:!1})}catch(r){throw n({error:r instanceof Error?r.message:"Failed to search gins",isLoading:!1}),r}},setCurrentGin:a=>n({currentGin:a}),clearError:()=>n({error:null})}));export{u};
