// ===================================
// TRANSLATIONS
// ===================================
const translations = {
    de: {
        // Navigation
        'nav-story': 'Story',
        'nav-features': 'Features',
        'nav-vision': 'Vision',
        'nav-cta': 'Early Access',

        // Hero Section
        'hero-title-1': 'Where Gin',
        'hero-title-2': 'Becomes',
        'hero-title-3': 'Legacy',
        'hero-subtitle': 'Der digitale Tresor fÃ¼r Gin-Sammler, die ihre Leidenschaft bewahren, strukturieren und teilen mÃ¶chten.',
        'hero-cta-primary': 'Jetzt entdecken',
        'hero-cta-secondary': 'Mehr erfahren',
        'hero-card1': 'Strukturierte Verkostungen',
        'hero-card2': 'Marktwert-Analysen',
        'hero-card3': 'KI-Empfehlungen',

        // Story Section
        'story-label': 'Die Geschichte',
        'story-title': 'Gin ist mehr als ein GetrÃ¤nk',
        'story-card1-title': 'Handwerk & Herkunft',
        'story-card1-text': 'Jede Flasche erzÃ¤hlt eine Geschichte â€“ von Destillerien, die mit Leidenschaft brennen, von Botanicals, die Regionen prÃ¤gen.',
        'story-card2-title': 'Sammler & Charakter',
        'story-card2-text': 'Sammler feiern diese Vielfalt, doch ihre Geschichten gehen oft verloren: in Notizen, Tabellen, Fotos oder im Kopf.',
        'story-card3-title': 'GinVault â€“ Die LÃ¶sung',
        'story-card3-text': 'Ein digitaler Tresor, der alles vereint, was eine Sammlung lebendig macht. Struktur trifft auf Genuss.',

        // Features Section
        'features-label': 'Features',
        'features-title': 'Alles, was Ihre Sammlung lebendig macht',
        'feature1-title': 'Strukturierte Verkostungen',
        'feature1-text': 'Erfassen Sie Aromen, Noten und EindrÃ¼cke mit einem professionellen Tasting-System. Ihre Verkostungen werden zu wertvollen Erinnerungen.',
        'feature1-stat': 'Verkostungsnotizen',
        'feature2-title': 'PrÃ¤zise Bestandsverwaltung',
        'feature2-text': 'Verwalten Sie Ihre Sammlung mit allen Details: Destillerie, Jahrgang, FÃ¼llstand, Standort. Behalten Sie den Ãœberblick.',
        'feature2-stat': 'Transparenz',
        'feature3-title': 'Marktwert-Analysen',
        'feature3-text': 'Verstehen Sie den Wert Ihrer Sammlung. Erhalten Sie Einblicke in Markttrends und Preisentwicklungen seltener AbfÃ¼llungen.',
        'feature3-stat': 'Marktdaten',
        'feature4-title': 'KI-gestÃ¼tzte Empfehlungen',
        'feature4-text': 'Entdecken Sie neue Gins basierend auf Ihren Vorlieben. Unsere KI lernt Ihren Geschmack und schlÃ¤gt passende AbfÃ¼llungen vor.',
        'feature4-stat': 'Algorithmus',

        // Vision Section
        'vision-label': 'Vision',
        'vision-title': 'Mehr als ein Tool',
        'vision-description': 'GinVault ist ein Ort, an dem Sammler ihre SchÃ¤tze bewahren, vergleichen, entdecken und teilen kÃ¶nnen.',
        'vision-feature1-title': 'Bewahren',
        'vision-feature1-text': 'Jede Flasche, jede Verkostung, jede Erinnerung â€“ sicher verwahrt',
        'vision-feature2-title': 'Vergleichen',
        'vision-feature2-text': 'Analysieren Sie Ihre Sammlung und entdecken Sie Muster',
        'vision-feature3-title': 'Entdecken',
        'vision-feature3-text': 'Neue Destillerien, Botanicals und Geschmacksrichtungen',
        'vision-feature4-title': 'Teilen',
        'vision-feature4-text': 'Ihre Leidenschaft mit einer Community von Gleichgesinnten',

        // Stats
        'stat-bottles': 'Flaschen',
        'stat-distilleries': 'Destillerien',
        'stat-tastings': 'Verkostungen',

        // CTA Section
        'cta-title': 'Bereit fÃ¼r GinVault?',
        'cta-subtitle': 'Sichern Sie sich frÃ¼hzeitigen Zugang und werden Sie Teil einer exklusiven Community von Gin-Sammlern.',
        'cta-email-placeholder': 'Ihre E-Mail-Adresse',
        'cta-button': 'Early Access sichern',
        'cta-note': 'Kein Spam. Nur Updates zu GinVault und exklusive Einblicke.',

        // Footer
        'footer-tagline': 'Where Gin Becomes Legacy'
    },
    en: {
        // Navigation
        'nav-story': 'Story',
        'nav-features': 'Features',
        'nav-vision': 'Vision',
        'nav-cta': 'Early Access',

        // Hero Section
        'hero-title-1': 'Where Gin',
        'hero-title-2': 'Becomes',
        'hero-title-3': 'Legacy',
        'hero-subtitle': 'The digital vault for gin collectors who want to preserve, organize, and share their passion.',
        'hero-cta-primary': 'Discover Now',
        'hero-cta-secondary': 'Learn More',
        'hero-card1': 'Structured Tastings',
        'hero-card2': 'Market Value Analysis',
        'hero-card3': 'AI Recommendations',

        // Story Section
        'story-label': 'The Story',
        'story-title': 'Gin is more than a drink',
        'story-card1-title': 'Craft & Origin',
        'story-card1-text': 'Every bottle tells a story â€“ of distilleries burning with passion, of botanicals that define regions.',
        'story-card2-title': 'Collectors & Character',
        'story-card2-text': 'Collectors celebrate this diversity, but their stories often get lost: in notes, spreadsheets, photos, or memory.',
        'story-card3-title': 'GinVault â€“ The Solution',
        'story-card3-text': 'A digital vault that unites everything that makes a collection come alive. Where structure meets enjoyment.',

        // Features Section
        'features-label': 'Features',
        'features-title': 'Everything that brings your collection to life',
        'feature1-title': 'Structured Tastings',
        'feature1-text': 'Capture aromas, notes, and impressions with a professional tasting system. Your tastings become valuable memories.',
        'feature1-stat': 'Tasting Notes',
        'feature2-title': 'Precise Inventory Management',
        'feature2-text': 'Manage your collection with all details: distillery, vintage, fill level, location. Keep the overview.',
        'feature2-stat': 'Transparency',
        'feature3-title': 'Market Value Analysis',
        'feature3-text': 'Understand the value of your collection. Get insights into market trends and price developments of rare bottlings.',
        'feature3-stat': 'Market Data',
        'feature4-title': 'AI-Powered Recommendations',
        'feature4-text': 'Discover new gins based on your preferences. Our AI learns your taste and suggests matching bottlings.',
        'feature4-stat': 'Algorithm',

        // Vision Section
        'vision-label': 'Vision',
        'vision-title': 'More than a tool',
        'vision-description': 'GinVault is a place where collectors can preserve, compare, discover, and share their treasures.',
        'vision-feature1-title': 'Preserve',
        'vision-feature1-text': 'Every bottle, every tasting, every memory â€“ safely stored',
        'vision-feature2-title': 'Compare',
        'vision-feature2-text': 'Analyze your collection and discover patterns',
        'vision-feature3-title': 'Discover',
        'vision-feature3-text': 'New distilleries, botanicals, and flavor profiles',
        'vision-feature4-title': 'Share',
        'vision-feature4-text': 'Your passion with a community of like-minded enthusiasts',

        // Stats
        'stat-bottles': 'Bottles',
        'stat-distilleries': 'Distilleries',
        'stat-tastings': 'Tastings',

        // CTA Section
        'cta-title': 'Ready for GinVault?',
        'cta-subtitle': 'Secure early access and become part of an exclusive community of gin collectors.',
        'cta-email-placeholder': 'Your email address',
        'cta-button': 'Secure Early Access',
        'cta-note': 'No spam. Only updates about GinVault and exclusive insights.',

        // Footer
        'footer-tagline': 'Where Gin Becomes Legacy'
    }
};

// ===================================
// LANGUAGE MANAGEMENT
// ===================================
let currentLanguage = localStorage.getItem('ginvault-language') || 'de';

function setLanguage(lang) {
    currentLanguage = lang;
    localStorage.setItem('ginvault-language', lang);

    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });

    // Update placeholders
    document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
        const key = element.getAttribute('data-i18n-placeholder');
        if (translations[lang][key]) {
            element.placeholder = translations[lang][key];
        }
    });

    // Update language toggle button
    const languageToggle = document.getElementById('languageToggle');
    if (languageToggle) {
        const flag = languageToggle.querySelector('.lang-flag');
        const code = languageToggle.querySelector('.lang-code');

        if (lang === 'de') {
            flag.textContent = 'ðŸ‡©ðŸ‡ª';
            code.textContent = 'DE';
        } else {
            flag.textContent = 'ðŸ‡¬ðŸ‡§';
            code.textContent = 'EN';
        }
    }

    // Update HTML lang attribute
    document.documentElement.lang = lang;
}

// Initialize language on page load
document.addEventListener('DOMContentLoaded', () => {
    setLanguage(currentLanguage);
});

// Language toggle button handler
const languageToggle = document.getElementById('languageToggle');
if (languageToggle) {
    languageToggle.addEventListener('click', () => {
        const newLang = currentLanguage === 'de' ? 'en' : 'de';
        setLanguage(newLang);
    });
}

// ===================================
// SMOOTH SCROLLING
// ===================================
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});

// ===================================
// MOBILE MENU TOGGLE
// ===================================
const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
const nav = document.querySelector('.nav');

if (mobileMenuToggle) {
    mobileMenuToggle.addEventListener('click', () => {
        nav.classList.toggle('active');
        mobileMenuToggle.classList.toggle('active');
    });
}

// ===================================
// HEADER SCROLL EFFECT
// ===================================
const header = document.querySelector('.header');
let lastScroll = 0;

window.addEventListener('scroll', () => {
    const currentScroll = window.pageYOffset;

    if (currentScroll > 100) {
        header.style.boxShadow = '0 2px 10px rgba(15, 61, 46, 0.1)';
    } else {
        header.style.boxShadow = 'none';
    }

    lastScroll = currentScroll;
});

// ===================================
// INTERSECTION OBSERVER FOR ANIMATIONS
// ===================================
const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -100px 0px'
};

const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.style.opacity = '1';
            entry.target.style.transform = 'translateY(0)';
        }
    });
}, observerOptions);

// Observe all cards and sections
const animatedElements = document.querySelectorAll('.story-card, .feature-card, .vision-feature');
animatedElements.forEach(el => {
    el.style.opacity = '0';
    el.style.transform = 'translateY(30px)';
    el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
    observer.observe(el);
});

// ===================================
// ANIMATED COUNTERS
// ===================================
const statValues = document.querySelectorAll('.stat-value');

const animateCounter = (element) => {
    const target = parseInt(element.getAttribute('data-target'));
    const duration = 2000; // 2 seconds
    const increment = target / (duration / 16); // 60fps
    let current = 0;

    const updateCounter = () => {
        current += increment;
        if (current < target) {
            element.textContent = Math.floor(current);
            requestAnimationFrame(updateCounter);
        } else {
            element.textContent = target;
        }
    };

    updateCounter();
};

// Observe stat elements
const statsObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting && !entry.target.classList.contains('animated')) {
            entry.target.classList.add('animated');
            animateCounter(entry.target);
        }
    });
}, { threshold: 0.5 });

statValues.forEach(stat => {
    statsObserver.observe(stat);
});

// ===================================
// PARALLAX EFFECT ON HERO
// ===================================
const heroContent = document.querySelector('.hero-content');
const heroImage = document.querySelector('.hero-image');

window.addEventListener('scroll', () => {
    const scrolled = window.pageYOffset;
    const parallaxSpeed = 0.5;

    if (heroContent && scrolled < window.innerHeight) {
        heroContent.style.transform = `translateY(${scrolled * parallaxSpeed}px)`;
        if (heroImage) {
            heroImage.style.transform = `translateY(${scrolled * parallaxSpeed * 0.8}px)`;
        }
    }
});

// ===================================
// FORM SUBMISSION
// ===================================
const earlyAccessForm = document.getElementById('earlyAccessForm');

if (earlyAccessForm) {
    earlyAccessForm.addEventListener('submit', (e) => {
        e.preventDefault();

        const email = earlyAccessForm.querySelector('input[type="email"]').value;

        // Here you would normally send this to your backend
        console.log('Early access request:', email);

        // Show success message
        const formContainer = earlyAccessForm.parentElement;
        const successMessages = {
            de: {
                icon: 'âœ“',
                title: 'Vielen Dank!',
                message: 'Sie wurden zur Early Access Liste hinzugefÃ¼gt.'
            },
            en: {
                icon: 'âœ“',
                title: 'Thank you!',
                message: 'You have been added to the Early Access list.'
            }
        };

        const msg = successMessages[currentLanguage];

        formContainer.innerHTML = `
            <div style="text-align: center; padding: 2rem;">
                <div style="font-size: 3rem; margin-bottom: 1rem;">${msg.icon}</div>
                <h3 style="color: var(--color-vault-gold); margin-bottom: 0.5rem;">${msg.title}</h3>
                <p style="color: rgba(255, 255, 255, 0.8);">${msg.message}</p>
            </div>
        `;
    });
}

// ===================================
// FLOATING CARDS INTERACTION
// ===================================
const floatingCards = document.querySelectorAll('.floating-card');

floatingCards.forEach(card => {
    card.addEventListener('mouseenter', () => {
        card.style.animationPlayState = 'paused';
        card.style.transform = 'scale(1.05) translateY(-10px)';
    });

    card.addEventListener('mouseleave', () => {
        card.style.animationPlayState = 'running';
        card.style.transform = '';
    });
});

// ===================================
// FEATURE CARDS TILT EFFECT
// ===================================
const featureCards = document.querySelectorAll('.feature-card');

featureCards.forEach(card => {
    card.addEventListener('mousemove', (e) => {
        const rect = card.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        const centerX = rect.width / 2;
        const centerY = rect.height / 2;

        const rotateX = (y - centerY) / 20;
        const rotateY = (centerX - x) / 20;

        card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateY(-5px)`;
    });

    card.addEventListener('mouseleave', () => {
        card.style.transform = '';
    });
});

// ===================================
// GLASS CARD MOUSE TRACKING
// ===================================
const glassCard = document.querySelector('.glass-card');

if (glassCard) {
    glassCard.addEventListener('mousemove', (e) => {
        const rect = glassCard.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        const gradient = `radial-gradient(circle at ${x}px ${y}px, rgba(212, 168, 87, 0.1) 0%, transparent 50%)`;
        glassCard.style.background = `rgba(15, 61, 46, 0.05)`;
        glassCard.style.backgroundImage = gradient;
    });

    glassCard.addEventListener('mouseleave', () => {
        glassCard.style.backgroundImage = 'none';
    });
}

// ===================================
// LOADING ANIMATION
// ===================================
window.addEventListener('load', () => {
    document.body.style.opacity = '0';
    setTimeout(() => {
        document.body.style.transition = 'opacity 0.5s ease';
        document.body.style.opacity = '1';
    }, 100);
});
